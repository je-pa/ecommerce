# ECOMMERCE

> ### Project
> 🔗 [프로젝트 관리](https://github.com/users/je-pa/projects/2)
> ### Monolithic Architecture
> 🔗 [모놀리식](https://github.com/je-pa/ecommerce)
> 
> ### MicroService Architecture
>  
> 🔗 [USER SERVICE](https://github.com/je-pa/ecommerce-user)
> 🔗 [PRODUCT SERVICE](https://github.com/je-pa/ecommerce-product)
> 🔗 [ORDER SERVICE](https://github.com/je-pa/ecommerce-order)
>
> 🔗 [GATEWAY](https://github.com/je-pa/scg-ecommerce)
> 🔗 [EUREKA SERVER](https://github.com/je-pa/eureka-server-ecommerce)
> 
> 🔗 [CONFIG SERVER(PRIVATE)](https://github.com/je-pa/ecommerce)
> 🔗 [CONFIG REPOSITORY(PRIVATE)](https://github.com/je-pa/ecommerce)
>
> ![image](https://github.com/user-attachments/assets/e3360ae2-44a7-405c-81b1-75efe2baea3a)

## ⭐ 기술 스택

<table>
  <tr>
    <th style="font-weight: bold;">분류</th>
    <th style="font-weight: bold;">기술</th>
    <th style="font-weight: bold;">비고</th>
  </tr>
  <tr>
    <td rowspan="1">프로그래밍 언어</td>
    <td><img src="https://img.shields.io/badge/java 21-007396?style=flat&logo=Java&logoColor=white" alt="Java" /></td>
    <td></td>
  </tr>
  <tr>
    <td rowspan="1">빌드 도구</td>
    <td><img src="https://img.shields.io/badge/Gradle-02303A?style=flat&logo=Gradle&logoColor=white" alt="Gradle" /></td>
    <td></td>
  </tr>
  <tr>
    <td rowspan="2">프레임워크</td>
    <td><img src="https://img.shields.io/badge/Spring_Boot 3.3.x-6DB33F?style=flat&logo=SpringBoot&logoColor=white" alt="Spring Boot" /></td>
    <td></td>
  </tr>
  <tr>
    <td><img src="https://img.shields.io/badge/Spring_Security-6DB33F?style=flat&logo=SpringSecurity&logoColor=white" alt="Spring Security" /></td>
    <td></td>
  </tr>
  <tr>
    <td rowspan="1">ORM</td>
    <td><img src="https://img.shields.io/badge/JPA(Hibernate)-59666C?style=flat&logo=hibernate&logoColor=white" alt="JPA(Hibernate)" /></td>
    <td></td>
  </tr>
  <tr>
    <td rowspan="3">데이터베이스</td>
    <td><img src="https://img.shields.io/badge/MySQL-4479A1?style=flat&logo=mysql&logoColor=white" alt="MySQL" /></td>
    <td></td>
  </tr>
  <tr>
    <td><img src="https://img.shields.io/badge/H2-59666C?style=flat&logoColor=white" alt="H2" /></td>
    <td>테스트 DB</td>
  </tr>
  <tr>
    <td><img src="https://img.shields.io/badge/Redis-DC382D?style=flat&logo=redis&logoColor=white" alt="Redis" /></td>
    <td>캐시</td>
  </tr>
  <tr>
    <td rowspan="3">테스트 도구</td>
    <td><img src="https://img.shields.io/badge/JUnit5-25A162?style=flat&logo=junit5&logoColor=white" alt="JUnit5" /></td>
    <td>통합 테스트</td>
  </tr>
  <tr>
    <td><img src="https://img.shields.io/badge/Mockito-3FCF8E?style=flat&logoColor=white" alt="Mockito" /></td>
    <td>단위 테스트</td>
  </tr>
  <tr>
    <td><img src="https://img.shields.io/badge/JaCoCo-B90000?style=flat&logo=java&logoColor=white" alt="JaCoCo" /></td>
    <td>테스트 커버리지 리포트</td>
  </tr>
  <tr>
    <td rowspan="1">정적 분석 도구</td>
    <td><img src="https://img.shields.io/badge/SonarQube-4E9BCD?style=flat&logo=sonarqube&logoColor=white" alt="SonarQube" /></td>
    <td>코드 품질 분석</td>
  </tr>
  <tr>
    <td rowspan="1">쿼리 빌더</td>
    <td><img src="https://img.shields.io/badge/QueryDSL-00599C?style=flat&logo=java&logoColor=white" alt="QueryDSL" /></td>
    <td></td>
  </tr>
  <tr>
   <td rowspan="2">인증/인가</td>
    <td><img src="https://img.shields.io/badge/JWT-000000?style=flat&logo=JSON%20Web%20Tokens&logoColor=white" alt="JWT" /></td>
    <td></td>
  </tr>
  <tr>
    <td><img src="https://img.shields.io/badge/Google%20SMTP-4285F4?style=flat&logo=gmail&logoColor=white" alt="Google SMTP" /></td>
    <td>mail 인증</td>
  </tr>
  <tr>
    <td rowspan="1">컨테이너화 도구</td>
    <td><img src="https://img.shields.io/badge/Docker-2496ED?style=flat&logo=docker&logoColor=white" alt="Docker" /></td>
    <td></td>
  </tr>
  <tr>
    <td rowspan="3">클라우드</td>
    <td><img src="https://img.shields.io/badge/Spring_Cloud 2023.0.3-6DB33F?style=flat&logo=Spring&logoColor=white" alt="Spring Cloud" /></td>
    <td></td>
  </tr>
  <tr>
    <td><img src="https://img.shields.io/badge/Spring_Cloud_Config-6DB33F?style=flat&logo=Spring&logoColor=white" alt="Spring Cloud Config" /></td>
    <td></td>
  </tr>
  <tr>
    <td><img src="https://img.shields.io/badge/Spring_Cloud_Gateway-6DB33F?style=flat&logo=Spring&logoColor=white" alt="Spring Cloud Gateway" /></td>
    <td></td>
  </tr>
  <tr>
    <td rowspan="2">서비스 디스커버리</td>
    <td><img src="https://img.shields.io/badge/Eureka-4285F4?style=flat&logoColor=white" alt="Eureka" /></td>
    <td></td>
  </tr>
  <tr>
    <td><img src="https://img.shields.io/badge/Eureka_Client-4285F4?style=flat&logoColor=white" alt="Eureka Client" /></td>
    <td></td>
  </tr>
</table>

## API

<table>
    <thead>
        <tr style="font-weight: bold;">
            <th>메서드</th>
            <th>엔드포인트</th>
            <th>설명</th>
            <th>요청 데이터 및 쿼리 파라미터 예시</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>POST</td>
            <td>/api/auth/login</td>
            <td>로그인</td>
            <td>
                <details>
                    <summary>application/x-www-form-urlencoded</summary>
                    <pre>username=email0@example.com&password=Password1!</pre>
                </details>
            </td>
        </tr>
        <tr>
            <td>POST</td>
            <td>/api/auth/send-email-auth-code</td>
            <td>인증코드 발송</td>
            <td>
                <details>
                    <summary>application/json</summary>
                    <pre>{ "email": "exampz@naver.com" }</pre>
                </details>
            </td>
        </tr>
        <tr>
            <td>POST</td>
            <td>/api/auth/signup</td>
            <td>회원가입</td>
            <td>
                <details>
                    <summary>application/json</summary>
                    <pre>{
    "name": "홍길동",
    "email": "example@naver.com",
    "password": "Password1!",
    "confirmPassword": "Password1!",
    "tellNumber": "010-7777-7777",
    "address": "서울시 용산구 351 오오오",
    "authCode": "131327"
}</pre>
                </details>
            </td>
        </tr>
        <tr>
            <td>POST</td>
            <td>/api/orders</td>
            <td>주문 생성</td>
            <td>
                <details>
                    <summary>application/json</summary>
                    <pre>[{
    "wishlistItemId": 1505
},
{
    "wishlistItemId": 1504
}]</pre>
                </details>
            </td>
        </tr>
        <tr>
            <td>PATCH</td>
            <td>/api/orders/{orderId}/status</td>
            <td>주문 상태 변경</td>
            <td>
                <details>
                    <summary>application/json</summary>
                    <pre>"CANCEL"</pre>
                </details>
            </td>
        </tr>
        <tr>
            <td>GET</td>
            <td>/api/products/{productId}</td>
            <td>제품 조회</td>
            <td></td>
        </tr>
        <tr>
            <td rowspan="3">GET</td>
            <td rowspan="3">/api/products</td>
            <td>제품 목록 조회</td>
            <td>
                <details>
                    <summary>쿼리 파라미터</summary>
                    <pre>pageSize=5&listSort=PRICE_DESC&pageNumber=2&storeId=56</pre>
                </details>
            </td>
        </tr>
        <tr>
            <td>제품 검색</td>
            <td>
                <details>
                    <summary>쿼리 파라미터</summary>
                    <pre>pageSize=5&listSort=PRICE_DESC&pageNumber=2&searchKeyword=21</pre>
                </details>
            </td>
        </tr>
        <tr>
            <td>카테고리별 제품 조회</td>
            <td>
                <details>
                    <summary>쿼리 파라미터</summary>
                    <pre>pageSize=5&listSort=PRICE_DESC&pageNumber=2&productCategory=ACCESSORY</pre>
                </details>
            </td>
        </tr>
        <tr>
            <td>POST</td>
            <td>/api/wishlists</td>
            <td>위시리스트 생성</td>
            <td>
                <details>
                    <summary>application/json</summary>
                    <pre>[{
    "optionId": 1516,
    "quantity": 2
},
{
    "optionId": 1517,
    "quantity": 1
}]</pre>
                </details>
            </td>
        </tr>
        <tr>
            <td>GET</td>
            <td>/api/wishlists</td>
            <td>위시리스트 조회</td>
            <td>
                <details>
                    <summary>쿼리 파라미터</summary>
                    <pre>memberId=58</pre>
                </details>
            </td>
        </tr>
        <tr>
            <td>PATCH</td>
            <td>/api/wishlists/items/{itemId}/quantity</td>
            <td>위시리스트 항목 수량 변경</td>
            <td>
                <details>
                    <summary>application/json</summary>
                    <pre>{
  "action": "DECREASE"
}</pre>
                </details>
            </td>
        </tr>
    </tbody>
</table>

## 요구사항

### 유저 서비스
<details>
  <summary>✨ 회원가입 및 로그인</summary>

  - 회원가입 기능을 통해 사용자는 계정을 생성할 수 있습니다.
      - [x] 이메일 인증을 통한 회원가입 기능을 만든다.
      - [x] 개인정보, `이름, 비밀번호, 주소, 이메일`은 `암호화`하여 저장한다.

  <figure>
      <img src="https://github.com/user-attachments/assets/24f380ed-2579-4b2a-8b6b-f3c675795769" alt="회원가입 및 로그인">
      <figcaption>회원가입 및 로그인</figcaption>
  </figure>

  - 로그인 시 access-token 발급한다.
</details>

### 상품 서비스

<details>
  <summary>✨ 상품 상세&리스트 조회</summary>

- [x] 등록되어 있는 상품의 리스트를 보여주고 사용자가 구매할 수 있는 인터페이스를 제공합니다.
- [x] 상품을 클릭시 상품의 상세 정보를 제공해야합니다.
   - 상품의 재고 관리를 위한 유저 인터페이스는 별도로 구현하지 않습니다.

  <figure>
      <img src="https://github.com/user-attachments/assets/3c17a6a0-1a31-4d72-bc2b-4ca9c3e81a42" alt="상품 조회">
      <figcaption>상품 조회</figcaption>
  </figure>
</details>

### 주문 서비스

<details>
  <summary>✨ 위시리스트 등록 및 조회</summary>

- [x] 사용자의 노출된 상품에 한하여 주문 및 WishList에 등록
- [x] WishList에서 내가 등록한 상품에 대한 정보 조회
  - [x]  제품의 상세 페이지로 이동
- [x]  상품의 수량 변경
- [x]  위시리스트 내 항목의 수정

  <figure>
      <img src="https://github.com/user-attachments/assets/c6032fdd-3967-4e4b-b82b-fc4ff029a4fc" alt="위시리스트 로직">
      <figcaption>위시리스트 로직</figcaption>
  </figure>
</details>

<details>
  <summary>✨ 마이페이지에서 주문 생성</summary>

- [x] 마이페이지에서 위시리스트를 통해 주문을 생성할 수 있습니다.

  <figure>
      <img src="https://github.com/user-attachments/assets/5ee65301-ace7-4fc7-a3cc-db5d1fe5078f" alt="상품 조회">
      <figcaption>마이페이지에서 주문 생성</figcaption>
  </figure>
</details>

<details>
  <summary>✨ 주문 상태 자동 변경</summary>

- [x] 주문 상태 변경
  -  주문 상품에 대한 상태 조회(주문 후 D+1에 배송 중, D+2일에 배송 완료가 됩니다.)

  <figure>
      <img src="https://github.com/user-attachments/assets/2b52b6ae-859f-4dff-a113-8e0afff3aa74" alt="주문 상태 자동 변경">
      <figcaption>주문 상태 자동 변경</figcaption>
  </figure>
</details>

<details>
  <summary>✨ 주문 취소</summary>

- 상품에 대한 주문 취소 기능을 제공합니다.
  - 주문 내역중 일부 상품에 대한 취소는 없다고 가정합니다.
- [x] `주문 취소`
  - 주문 상태가 배송중이 되기 이전까지만 취소가 가능합니다.
  - 취소 후에 는 상품의 재고를 복구 되어야 합니다 주문 취소 후 상태는 취소 완료로 변경 됩니다.

  <figure>
      <img src="https://github.com/user-attachments/assets/c72fe038-b81f-4cfa-9d2d-9e26944b8c9f" alt="주문 취소">
      <figcaption>주문 취소</figcaption>
  </figure>
</details>

<details>
  <summary>✨ 주문 반품</summary>

- 상품에 대한 주문 반품 기능을 제공합니다.
  - 주문 내역중 일부 상품에 대한 반품은 없다고 가정합니다.
- [x] `반품신청`
  - 배송 완료 후 D+1일까지만 반품이 가능하고 그 이후에는 반품이 불가능 합니다.
  - 배송 완료가 된 상품에 대해서만 반품이 가능합니다.
- [x] `반품완료`
  - 반품한 상품은 반품 신청 후 D+1에 재고에 반영 됩니다. 재고에 반영된 후 상태는 반품 완료로 변경됩니다.

  <figure>
      <img src="https://github.com/user-attachments/assets/9187d156-26ef-4aff-94e5-a7d711c340f7" alt="주문 반품">
      <figcaption>주문 반품</figcaption>
  </figure>
</details>

## 데이터베이스
![DB](https://github.com/user-attachments/assets/d5e4915b-ebf8-4d07-8e0f-c89a20fa5cbc)

